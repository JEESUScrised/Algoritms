# Система анализа зависимостей в проекте

Система для анализа зависимостей между компонентами проекта с использованием алгоритмов BFS, DFS и топологической сортировки.

## Возможности

| Функция          | Описание                                                         |
|------------------|------------------------------------------------------------------|
| Построение графа | Создание графа зависимостей между компонентами                   |
| Проверка циклов  | Обнаружение циклических зависимостей (топологическая сортировка) |
| BFS поиск        | Поиск зависимостей по уровням                                    |
| DFS поиск        | Полный обход всех зависимостей с кэшированием                    |
| Визуализация     | Отрисовка графа зависимостей (networkx/matplotlib)               |
| Критический путь | Поиск самого длинного пути в DAG                                 |

## Структура проекта

| Файл                     | Описание                                        |
|--------------------------|-------------------------------------------------|
| `dependency_analyzer.py` | Классы `DependencyGraph` и `DependencyAnalyzer` |
| `example.py`             | Примеры использования                           |
| `dependencies.txt`       | Файл с зависимостями (формат: "A от B, C")      |
| `requirements.txt`       | Зависимости Python                              |

## Установка

```bash
pip install -r requirements.txt
```

## Быстрый старт

```python
from dependency_analyzer import DependencyGraph, DependencyAnalyzer

# Создание графа
graph = DependencyGraph()
graph.add_dependency("A", "B")
graph.add_dependency("A", "C")

# Проверка на циклы
if graph.is_acyclic():
    print(f"Порядок сборки: {graph.get_topological_order()}")

# Анализ зависимостей
analyzer = DependencyAnalyzer(graph)
bfs_result = analyzer.find_dependencies_bfs("A")  # По уровням
dfs_result = analyzer.find_dependencies_dfs("A")  # Все зависимости
```

## API

### DependencyGraph

| Метод                                  |Параметры                                | Возвращает          | Описание                        |
|----------------------------------------|-----------------------------------------|---------------------|---------------------------------|
| `add_component(name)`                  | `name: str`                             | `None`              | Добавляет компонент             |
| `add_dependency(from, to, weight=1.0)` | `from: str`, `to: str`, `weight: float` | `None`              | Добавляет зависимость           |
| `is_acyclic()`                         | -                                       | `bool`              | Проверяет наличие циклов        |
| `get_topological_order()`              | -                                       | `List[str] \| None` | Порядок сборки (None при цикле) |
| `get_dependencies(component)`          | `component: str`                        | `List[str]`         | Список зависимостей             |

### DependencyAnalyzer

| Метод | Параметры | Возвращает | Описание |
|-------|-----------|------------|----------|
| `find_dependencies_bfs(start)` | `start: str` | `List[List[str]]` | Зависимости по уровням |
| `find_dependencies_dfs(start)` | `start: str` | `Set[str]` | Все уникальные зависимости |
| `find_critical_path(start)` | `start: str` | `Tuple[List[str], float]` | Критический путь и вес |
| `visualize_graph(filename, highlight_component)` | `filename: str`, `highlight_component: str \| None` | `None` | Визуализация графа |
| `clear_cache()` | - | `None` | Очистка кэша DFS |

## Алгоритмы

| Алгоритм                  | Сложность | Описание                                |
|---------------------------|-----------|-----------------------------------------|
| Топологическая сортировка | O(V + E)  | Алгоритм Кана для проверки ацикличности |
| BFS                       | O(V + E)  | Поиск в ширину по уровням               |
| DFS                       | O(V + E)  | Поиск в глубину с кэшированием          |
| Критический путь          | O(V + E)  | Динамическое программирование на DAG    |

## Примеры

### Загрузка из файла

```python
from example import load_dependencies_from_file
graph = load_dependencies_from_file("dependencies.txt")
```

### Критический путь

```python
graph.add_dependency("A", "B", weight=2.0)
graph.add_dependency("A", "C", weight=3.0)
analyzer = DependencyAnalyzer(graph)
path, weight = analyzer.find_critical_path("A")
```

### Запуск демонстрации

```bash
python example.py
```

## Реализация

- **Топологическая сортировка**: Алгоритм Кана (Kahn's algorithm)
- **Кэширование**: Результаты DFS кэшируются для оптимизации
- **Визуализация**: networkx + matplotlib с поддержкой весов и подсветки
- **Критический путь**: Динамическое программирование на топологическом порядке

---

```
+------------------------------------------------------------------------------------------------------+
|                               __  __      __          __    _ __    __                               |
|                              / / / /___  / /_  __    / /_  (_) /_  / /__                             |
|                             / /_/ / __ \/ / / / /   / __ \/ / __ \/ / _ \                            |
|                            / __  / /_/ / / /_/ /   / /_/ / / /_/ / /  __/                            |
|                           /_/ /_/\____/_/\__, /   /_.___/_/_.___/_/\___/                             |
|                              ____ ______/____/__  ______                                             |
|                             / __ `/ ___/ __ \/ / / / __ \                                            |
|                            / /_/ / /  / /_/ / /_/ / /_/ /                                            |
|                            \__, /_/   \____/\__,_/ .___(_)                                           |
|                           /____/                /_/                                                  |
|    __________________________                      ____               __                             |
|   /\                         \\                   / __ )__  __       / /__  ___  _______  _______    |
|  /  \            ____         \\                 / __  / / / /  __  / / _ \/ _ \/ ___/ / / / ___/    |
| / \/ \          /\   \         \\               / /_/ / /_/ /  / /_/ /  __/  __(__  ) /_/ (__  )     |
| \ /\  \         \ \   \         \\             /_____/\__, /   \____/\___/\___/____/\__,_/____/  __  |
|  \  \  \     ____\_\   \______   \\                  /____/           __________(_)_______  ____/ /  |
|   \   /\\   /\                \   \\                                 / ___/ ___/ / ___/ _ \/ __  /   |
|    \ /\/ \  \ \_______    _____\   \\                               / /__/ /  / (__  )  __/ /_/ /    |
|     \\/ / \  \/______/\   \____/    \\                              \___/_/  /_/____/\___/\__,_/     |
|      \ / /\\         \ \   \         \\                                                              |
|       \ /\/ \         \ \   \         \\                                                             |
|        \\/ / \         \ \   \         \\                                                            |
|         \ /   \         \ \   \         \\                                                           |
|          \\  /\\         \ \   \         \\                                                          |
|           \ /\  \         \ \___\         \\                                                         |
|            \\    \         \/___/          \\                                                        |
|             \  \/ \                         \\                                                       |
|              \ /\  \_________________________\\                                                      |
|               \  \ / ______________________  //                                                      |
|                \  / ______________________  //                                                       |
|                 \/_________________________//                                                        |
|                                                                                                      |
+------------------------------------------------------------------------------------------------------+
```
